{% extends 'base.html' %}
{% load static %}

{% block title %}Enregistrer un Dossier - DigitalCare{% endblock %}

{% block css %}
<link rel="stylesheet" href="{% static 'style/dossier.css' %}">
{% endblock %}

{% block content %}
<div class="max-w-3xl mx-auto px-4 py-8">
    <h2 class="text-2xl font-bold mb-6 text-gray-800">Créer un Dossier Médical</h2>
    
    <form method="post" class="space-y-6">
        {% csrf_token %}

        <!-- Antécédents médicaux -->
        <div>
            <label for="antecedents_medicaux" class="block text-sm font-medium text-gray-700">Antécédents médicaux</label>
            <textarea name="antecedents_medicaux" id="antecedents_medicaux" rows="3"
                placeholder="Ex : Hypertension, diabète..."
                class="w-full px-4 py-2 border rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500"></textarea>
        </div>

        <!-- Allergies -->
        <div>
            <label for="allergies" class="block text-sm font-medium text-gray-700">Allergies</label>
            <textarea name="allergies" id="allergies" rows="2"
                placeholder="Ex : Pénicilline, pollen..."
                class="w-full px-4 py-2 border rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500"></textarea>
        </div>

        <!-- Gravité des allergies -->
        <div>
            <label for="gravite_allergie" class="block text-sm font-medium text-gray-700">Gravité des allergies</label>
            <select name="gravite_allergie" id="gravite_allergie"
                class="w-full px-4 py-2 border rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500">
                <option value="">-- Sélectionner --</option>
                {% for key, value in gravite_allergies %}
                    <option value="{{ key }}">{{ value }}</option>
                {% endfor %}
            </select>
        </div>

        <!-- Groupe sanguin -->
        <div>
            <label for="groupe_sanguin" class="block text-sm font-medium text-gray-700">Groupe sanguin</label>
            <select name="groupe_sanguin" id="groupe_sanguin"
                class="w-full px-4 py-2 border rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500">
                <option value="">-- Sélectionner --</option>
                {% for key, value in groupes_sanguins %}
                    <option value="{{ key }}">{{ value }}</option>
                {% endfor %}
            </select>
        </div>

        <!-- Rhésus -->
        <div>
            <label for="rhésus" class="block text-sm font-medium text-gray-700">Rhésus</label>
            <select name="rhésus" id="rhésus"
                class="w-full px-4 py-2 border rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500">
                <option value="">-- Sélectionner --</option>
                {% for key, value in rhesus_options %}
                    <option value="{{ key }}">{{ value }}</option>
                {% endfor %}
            </select>
        </div>

        <!-- Taille -->
        <div>
            <label for="taille" class="block text-sm font-medium text-gray-700">Taille (cm)</label>
            <input type="number" step="0.1" name="taille" id="taille" placeholder="Ex : 175.5"
                class="w-full px-4 py-2 border rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500">
        </div>

        <!-- Poids -->
        <div>
            <label for="poids" class="block text-sm font-medium text-gray-700">Poids (kg)</label>
            <input type="number" step="0.1" name="poids" id="poids" placeholder="Ex : 68.5"
                class="w-full px-4 py-2 border rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500">
        </div>

        <!-- Pression artérielle -->
        <div>
            <label for="pression_arterielle" class="block text-sm font-medium text-gray-700">Pression artérielle</label>
            <select name="pression_arterielle" id="pression_arterielle"
                class="w-full px-4 py-2 border rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500">
                <option value="">-- Sélectionner --</option>
                {% for key, value in pressions_arterielles %}
                    <option value="{{ key }}">{{ value }}</option>
                {% endfor %}
            </select>
        </div>

        <!-- Température corporelle -->
        <div>
            <label for="temperature_corporelle" class="block text-sm font-medium text-gray-700">Température (°C)</label>
            <input type="number" step="0.1" name="temperature_corporelle" id="temperature_corporelle" placeholder="Ex : 37.2"
                class="w-full px-4 py-2 border rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500">
        </div>

        <!-- Fréquence cardiaque -->
        <div>
            <label for="frequence_cardiaque" class="block text-sm font-medium text-gray-700">Fréquence cardiaque (bpm)</label>
            <input type="number" name="frequence_cardiaque" id="frequence_cardiaque" placeholder="Ex : 72"
                class="w-full px-4 py-2 border rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500">
        </div>

        <!-- Fréquence respiratoire -->
        <div>
            <label for="frequence_respiratoire" class="block text-sm font-medium text-gray-700">Fréquence respiratoire (/min)</label>
            <input type="number" name="frequence_respiratoire" id="frequence_respiratoire" placeholder="Ex : 18"
                class="w-full px-4 py-2 border rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500">
        </div>

        <!-- Saturation en oxygène -->
        <div>
            <label for="saturation_oxygene" class="block text-sm font-medium text-gray-700">Saturation O<sub>2</sub> (%)</label>
            <input type="number" name="saturation_oxygene" id="saturation_oxygene" placeholder="Ex : 98"
                class="w-full px-4 py-2 border rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500">
        </div>

        <!-- Diagnostic -->
        <div>
            <label for="diagnostic" class="block text-sm font-medium text-gray-700">Diagnostic</label>
            <textarea name="diagnostic" id="diagnostic" rows="2"
                class="w-full px-4 py-2 border rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500"></textarea>
        </div>

        <!-- Traitements en cours -->
        <div>
            <label for="traitements_en_cours" class="block text-sm font-medium text-gray-700">Traitements en cours</label>
            <textarea name="traitements_en_cours" id="traitements_en_cours" rows="2"
                class="w-full px-4 py-2 border rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500"></textarea>
        </div>

        <!-- Notes médicales -->
        <div>
            <label for="notes_medicales" class="block text-sm font-medium text-gray-700">Notes médicales</label>
            <textarea name="notes_medicales" id="notes_medicales" rows="3"
                class="w-full px-4 py-2 border rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500"></textarea>
        </div>

        <!-- Recommandations -->
        <div>
            <label for="recommandations" class="block text-sm font-medium text-gray-700">Recommandations</label>
            <textarea name="recommandations" id="recommandations" rows="2"
                class="w-full px-4 py-2 border rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500"></textarea>
        </div>

        <!-- Bouton de soumission -->
        <div>
            <button type="submit"
                class="w-full bg-blue-600 text-white py-2 px-4 rounded-md hover:bg-blue-700 transition duration-200">
                Enregistrer le Dossier
            </button>
        </div>
    </form>
</div>
{% endblock %}

{% block js %}
<script src="{% static 'js/dossier.js' %}"></script>
{% endblock %}
