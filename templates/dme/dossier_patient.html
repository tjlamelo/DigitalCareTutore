{% extends "dme/base.html" %}

{% block content %}
 
    <div class="max-w-4xl mx-auto px-4 py-8">
        <h1 class="text-3xl font-bold text-gray-800 mb-6">Dossier Médical de {{ dossier.patient.username }}</h1>
        
        <div class="bg-white shadow rounded-lg p-6 mb-8">
            <h2 class="text-xl font-semibold text-gray-700 mb-4 border-b pb-2">Informations générales</h2>
            <p class="text-gray-600">Date de création : <span class="font-medium">{{ dossier.date_creation }}</span></p>
        </div>

        <div class="grid md:grid-cols-2 gap-6">
            <!-- Allergies Section -->
            <div class="bg-white shadow rounded-lg p-6">
                <div class="flex justify-between items-center mb-4">
                    <h2 class="text-xl font-semibold text-gray-700">Allergies</h2>
                    <a href="{% url 'dossiers:ajouter_allergie' dossier.id %}" class="bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded text-sm transition duration-200">Ajouter</a>
                </div>
                <ul class="space-y-2">
                    {% for allergie in dossier.allergies.all %}
                        <li class="bg-gray-50 p-3 rounded">{{ allergie }}</li>
                    {% empty %}
                        <li class="text-gray-500 italic">Aucune allergie enregistrée.</li>
                    {% endfor %}
                </ul>
            </div>

            <!-- Antécédents Section -->
            <div class="bg-white shadow rounded-lg p-6">
                <div class="flex justify-between items-center mb-4">
                    <h2 class="text-xl font-semibold text-gray-700">Antécédents Médicaux</h2>
                    <a href="{% url 'dossiers:ajouter_antecedent' dossier.id %}" class="bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded text-sm transition duration-200">Ajouter</a>
                </div>
                <ul class="space-y-2">
                    {% for antecedent in dossier.antecedents.all %}
                        <li class="bg-gray-50 p-3 rounded">{{ antecedent }}</li>
                    {% empty %}
                        <li class="text-gray-500 italic">Aucun antécédent enregistré.</li>
                    {% endfor %}
                </ul>
            </div>

            <!-- Mesures Section -->
            <div class="bg-white shadow rounded-lg p-6">
                <div class="flex justify-between items-center mb-4">
                    <h2 class="text-xl font-semibold text-gray-700">Mesures Cliniques</h2>
                    <a href="{% url 'dossiers:ajouter_mesure' dossier.id %}" class="bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded text-sm transition duration-200">Ajouter</a>
                </div>
                <ul class="space-y-2">
                    {% for mesure in dossier.mesures.all %}
                        <li class="bg-gray-50 p-3 rounded">{{ mesure }}</li>
                    {% empty %}
                        <li class="text-gray-500 italic">Aucune mesure enregistrée.</li>
                    {% endfor %}
                </ul>
            </div>

            <!-- Vaccinations Section -->
            <div class="bg-white shadow rounded-lg p-6">
                <div class="flex justify-between items-center mb-4">
                    <h2 class="text-xl font-semibold text-gray-700">Vaccinations</h2>
                    <a href="{% url 'dossiers:ajouter_vaccination' dossier.id %}" class="bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded text-sm transition duration-200">Ajouter</a>
                </div>
                <ul class="space-y-2">
                    {% for vaccination in dossier.vaccinations.all %}
                        <li class="bg-gray-50 p-3 rounded">{{ vaccination }}</li>
                    {% empty %}
                        <li class="text-gray-500 italic">Aucune vaccination enregistrée.</li>
                    {% endfor %}
                </ul>
            </div>

            <!-- Consultations Section -->
            <div class="bg-white shadow rounded-lg p-6">
                <div class="flex justify-between items-center mb-4">
                    <h2 class="text-xl font-semibold text-gray-700">Consultations</h2>
                    <a href="{% url 'dossiers:ajouter_consultation' dossier.id %}" class="bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded text-sm transition duration-200">Ajouter</a>
                </div>
                <ul class="space-y-2">
                    {% for consultation in dossier.consultations.all %}
                        <li class="bg-gray-50 p-3 rounded">{{ consultation }}</li>
                    {% empty %}
                        <li class="text-gray-500 italic">Aucune consultation enregistrée.</li>
                    {% endfor %}
                </ul>
            </div>

            <!-- Hospitalisations Section -->
            <div class="bg-white shadow rounded-lg p-6">
                <div class="flex justify-between items-center mb-4">
                    <h2 class="text-xl font-semibold text-gray-700">Hospitalisations</h2>
                    <a href="{% url 'dossiers:ajouter_hospitalisation' dossier.id %}" class="bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded text-sm transition duration-200">Ajouter</a>
                </div>
                <ul class="space-y-2">
                    {% for hospitalisation in dossier.hospitalisations.all %}
                        <li class="bg-gray-50 p-3 rounded">{{ hospitalisation }}</li>
                    {% empty %}
                        <li class="text-gray-500 italic">Aucune hospitalisation enregistrée.</li>
                    {% endfor %}
                </ul>
            </div>
        </div>
    </div>
{% endblock %}